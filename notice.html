<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JCMedical</title>  
  <meta name="description" content="JCMedical Mindray 전문 대리점 초음파기기, 심전도, 환자감시모니터 등 의료 현장의 최적 솔루션을 제공합니다.">  
  <meta name="robots" content="index, follow">
  <meta name="author" content="JCMedical">  
  <link rel="canonical" href="https://www.jcmedical.com/">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/notice.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="js/app.js" defer></script>
  <meta name="naver-site-verification" content="e3224d2001f058651c634e66ea09269c2c08233d" />
</head>
<body>
<header>
    <div class="header-inner">
        <a href="index.html" class="logo">
            <img src="img/logo_long.png" alt="JC Medical">
        </a>
        
        <nav class="nav">
            <ul class="nav-menu">
                <li class="nav-item">
					<a href="#">회사소개 <span class="icon-plus">+</span><span class="icon-minus">-</span></a>
					<ul class="mobile-sub">
						<li><a href="about.html">인사말</a></li>
						<li><a href="about.html#location">오시는길</a></li>
					</ul>
				</li>
                <li class="nav-item">
					<a href="#">PRODUCT <span class="icon-plus">+</span><span class="icon-minus">-</span></a>
					<ul class="mobile-sub">
						<li><a href="products.html?cat=ultrasound">초음파진단기</a></li>
						<li><a href="products.html?cat=freq">고주파기기</a></li>
						<li><a href="products.html?cat=used">중고장비</a></li>
					</ul>
				</li>
                <li class="nav-item">
					<a href="notice.html">공지사항</a>
				</li>
                <li class="nav-item">
					<a href="contact.html">문의하기</a>
				</li>
            </ul>
        </nav>
		
		<div class="partner-logo">
			<img src="img/min_logo.png" alt="Mindray">
			<a href="http://pf.kakao.com/_pdvjn/chat" target="_blank"><img src="img/kakao.png" alt="kakao"></a>
			<a href="https://blog.naver.com/jcmedical0826" target="_blank"><img src="img/blog.png" alt="naver blog"></a>
		</div>
        
        <div class="hamburger">☰</div>
    </div>

    <div class="mega-menu">
        <div class="mega-inner">
            <div class="mega-col">
                <a href="about.html">인사말</a>
				<a href="about.html#location">오시는길</a>
            </div>
        
            <div class="mega-col">
                <a href="products.html?cat=ultrasound">초음파진단기</a>
				<a href="products.html?cat=freq">고주파기기</a>
                <a href="products.html?cat=used">중고장비</a>
            </div>
        
            <div class="mega-col">
                <a href="notice.html">공지사항</a>
            </div>
        
            <div class="mega-col">
                <a href="contact.html">문의하기</a>
            </div>
        </div>
    </div>
</header>

<section class="sub-visual">
    <div class="visual-text">
        <h2>NOTICE</h2>
        <p>JC Medical의 끊임없는 도전과 변화, 이곳에서 확인하세요.</p>
    </div>
</section>

<div class="content-wrapper">
    <section>
        <div class="list-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">            
            <a href="notice_write.html" id="admin-write-btn" class="btn btn-point" data-admin-only>등록</a>
        </div>

<div class="notice-section">
    <!-- JS로 렌더링될 영역 -->
    <div id="noticeList" class="notice-grid">        
        <!-- 동적 로드 시 이 부분에 자바스크립트로 생성된 태그들이 들어갑니다 -->
    </div>
</div>
    </section>
<style>
[data-admin-only] {
  display: none;
}
</style>
    <script>
        async function loadNotice() {
    let { data, error } = await supabaseClient
        .from('notices')
        .select('*')
        .order('created_at', { ascending: false });

    if (error) {
        console.error('데이터 로드 실패:', error.message);
        return;
    }

    const grid = document.getElementById('noticeList');
    if (!grid) return;

    if (data.length === 0) {
        grid.innerHTML = `<p style="text-align:center; padding:50px 0;">등록된 공지사항이 없습니다.</p>`;
        return;
    }

    grid.innerHTML = data.map((p, index) => {
        // 이미지 유무 확인 (Quill 에디터 특성상 첫 번째 이미지를 썸네일로 쓰거나 별도 필드 이용)
        const hasImage = p.image_url ? `<div class="thumb"><img src="${p.image_url}"></div>` : '';
        const date = new Date(p.created_at).toLocaleDateString();
        
        return `
            <div class="notice-item" onclick="location.href='notice_view.html?id=${p.id}'">
                <div class="no">${data.length - index}</div>
                <div class="content-group">
                    <span class="cat">${p.category || '공지'}</span>
                    <strong class="title">${p.title}</strong>
                    <span class="date">${date}</span>
                </div>
                ${hasImage}
            </div>
        `;
    }).join('');

    // 관리자 버튼 표시 (app.js의 로그인 상태 연동)
    if (typeof applyAdminOnly === 'function') {
        applyAdminOnly(window.isAdmin); 
    }
}

window.addEventListener('DOMContentLoaded', loadNotice);
    </script>	
</div>
<footer class="site-footer">
  <div class="footer-inner">

    <div class="footer-logo-area">
      <img src="img/logo.png" alt="JC Medical" class="footer-logo">
    </div>
	
	<div class="footer-text-area">
      <p class="footer-info">
        Address: 경기도 성남시 수정구 위례서로24, 위례행복빌딩3층 303호<br>
        Tel: 070-4651-5088 | 010-9474-6127 <br>
        E-mail: jcmedi0826@naver.com<Br>
		사업자번호: 512-13-30045
      </p>
	  
	  <div class="footer-links">
      <a href="policy.html?tab=terms">이용약관</a>
      <span class="divider">|</span>
      <a href="policy.html?tab=privacy">개인정보처리방침</a>
    </div>
    </div>

  </div>

  <div class="footer-bottom">
    © 2025 JC Medical. All rights reserved.
  </div>
</footer>
<script>

</script>
</body>
</html>