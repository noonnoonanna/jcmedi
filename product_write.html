<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì œì´ì”¨ë©”ë””ì¹¼(JCMedical) | ì˜¤ìŠ¤í…Œì˜¤ì‹œìŠ¤ * ë§ˆì¸ë“œë ˆì´ ì „ë¬¸ ëŒ€ë¦¬ì </title>
  <meta name="description" content="ì œì´ì”¨ë©”ë””ì¹¼(JCMedical)">
  <meta name="keywords" content="ì œì´ì”¨ë©”ë””ì¹¼, jcë©”ë””ì¹¼, jcmedical, ì˜¤ìŠ¤í…Œì˜¤ì‹œìŠ¤, ë§ˆì¸ë“œë ˆì´, ì´ˆìŒíŒŒëŒ€ë¦¬ì , ì‹¬ì „ë„ê¸°, í™˜ìê°ì‹œëª¨ë‹ˆí„°, ì¤‘ê³ ì´ˆìŒíŒŒ">
  <meta name="robots" content="index, follow">
  <meta property="og:type" content="website">
  <meta property="og:title" content="ì œì´ì”¨ë©”ë””ì¹¼ - ì˜¤ìŠ¤í…Œì˜¤ì‹œìŠ¤ * ë§ˆì¸ë“œë ˆì´ ì „ë¬¸ ëŒ€ë¦¬ì ">
  <meta property="og:description" content="ì´ˆìŒíŒŒ, ì‹¬ì „ë„, í™˜ìê°ì‹œëª¨ë‹ˆí„° ë“± ì˜ë£Œì¥ë¹„ ì†”ë£¨ì…˜ì˜ ì¤‘ì‹¬ JCMedical">
  <meta property="og:url" content="https://www.jcmedical.com/">
  <meta property="og:image" content="https://www.jcmedical.com/img/logo.png">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MedicalBusiness",
    "name": "ì œì´ì”¨ë©”ë””ì¹¼ (JCMedical)",
    "description": "ë§ˆì¸ë“œë ˆì´ ì´ˆìŒíŒŒ ì§„ë‹¨ê¸° ë° ë°”ì´ì˜¤ë„· ì‹¬ì „ë„ê¸°, í™˜ìê°ì‹œëª¨ë‹ˆí„° ì „ë¬¸ ìœ í†µì‚¬",
    "url": "https://www.jcmedical.com/",
    "telephone": "010-9474-6127",
    "address": {
      "@type": "PostalAddress",
	  "postalCode": "13647",
	  "addressRegion": "ê²½ê¸°",
      "addressLocality": "ì„±ë‚¨ì‹œ ìˆ˜ì •êµ¬",
	  "streetAddress": "ìœ„ë¡€ì„œë¡œ24, ìœ„ë¡€í–‰ë³µë¹Œë”©3ì¸µ 303í˜¸"
    },
    "keywords": "ë§ˆì¸ë“œë ˆì´, ì´ˆìŒíŒŒ, ì‹¬ì „ë„ê¸°, Cardio7, ì¤‘ê³  ì´ˆìŒíŒŒ, í† ë¥´ë¦¬í”„íŒ…"
  }
  </script>
  <meta name="author" content="JCMedical">  
  <link rel="canonical" href="https://www.jcmedical.com/">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/products.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/app.js" defer></script>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
</head>
<body>
<script>
async function checkAuth() {
    // ì´ì œ supabaseClientê°€ ë¡œë“œëœ í›„ì— ì‹¤í–‰ë˜ë¯€ë¡œ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    const { data: { user } } = await supabaseClient.auth.getUser();
    console.log(user);
    
    if (!user) {
        alert("ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        location.href = 'index.html';
    }
}

// 1. DOMContentLoadedë¥¼ ì‚¬ìš©í•˜ì—¬ app.js(defer)ê°€ ì‹¤í–‰ëœ ì§í›„ì— ì‘ë™í•˜ê²Œ í•©ë‹ˆë‹¤.
window.addEventListener('DOMContentLoaded', () => {
    checkAuth();
    
    // ê¸°ì¡´ì˜ ì œí’ˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ë„ ì•„ë§ˆ ì—¬ê¸° ìˆê±°ë‚˜ ì´ ë°‘ì— ìˆì„ ê±°ì˜ˆìš”.
    // loadProductData(); 
});
</script>
<header>
    <div class="header-inner">
        <a href="index.html" class="logo">
            <img src="img/logo_long.png" alt="JC Medical">
        </a>
        
        <nav class="nav">
            <ul class="nav-menu">
                <li class="nav-item">
					<a href="#">íšŒì‚¬ì†Œê°œ <span class="icon-plus">+</span><span class="icon-minus">-</span></a>
					<ul class="mobile-sub">
						<li><a href="about.html">ì¸ì‚¬ë§</a></li>
						<li><a href="about.html#location">ì˜¤ì‹œëŠ”ê¸¸</a></li>
					</ul>
				</li>
                <li class="nav-item">
					<a href="#">PRODUCT <span class="icon-plus">+</span><span class="icon-minus">-</span></a>
					<ul class="mobile-sub">
						<li><a href="products.html?cat=bmd">ê³¨ë°€ë„ì§„ë‹¨ê¸° (BMD)</a></li>
						<li><a href="products.html?cat=eswt">ì²´ì™¸ì¶©ê²©íŒŒ (ESWT)</a></li>
						<li><a href="products.html?cat=ultrasound">ì´ˆìŒíŒŒì§„ë‹¨ê¸° (Ultrasound / SONO)</a></li>
						<li><a href="products.html?cat=freq">ê³ ì£¼íŒŒê¸°ê¸° (TORR RF)</a></li>
						<li><a href="products.html?cat=used">ì¤‘ê³ ì¥ë¹„</a></li>
					</ul>
				</li>
                <li class="nav-item">
					<a href="notice.html">ê³µì§€ì‚¬í•­</a>
				</li>
                <li class="nav-item">
					<a href="contact.html">ë¬¸ì˜í•˜ê¸°</a>
				</li>
            </ul>
        </nav>
		
		<div class="partner-logo">
			<div class="vendor-logos">
				<img src="img/os_logo.png" alt="OsteoSys">
				<img src="img/min_logo.png" alt="Mindray">
			</div>
			<a href="http://pf.kakao.com/_pdvjn/chat" target="_blank"><img src="img/kakao.png" alt="kakao"></a>
			<a href="https://blog.naver.com/jcmedical0826" target="_blank"><img src="img/blog.png" alt="naver blog"></a>
		</div>
        
        <div class="hamburger">â˜°</div>
    </div>

    <div class="mega-menu">
        <div class="mega-inner">
            <div class="mega-col">
                <a href="about.html">ì¸ì‚¬ë§</a>
				<a href="about.html#location">ì˜¤ì‹œëŠ”ê¸¸</a>
            </div>
        
            <div class="mega-col">
				<a href="products.html?cat=bmd">ê³¨ë°€ë„ì§„ë‹¨ê¸° (BMD)</a>
				<a href="products.html?cat=eswt">ì²´ì™¸ì¶©ê²©íŒŒ (ESWT)</a>
				<a href="products.html?cat=ultrasound">ì´ˆìŒíŒŒì§„ë‹¨ê¸°<br>(Ultrasound / SONO)</a>
				<a href="products.html?cat=freq">ê³ ì£¼íŒŒê¸°ê¸° (TORR RF)</a>
                <a href="products.html?cat=used">ì¤‘ê³ ì¥ë¹„</a>
            </div>
        
            <div class="mega-col">
                <a href="notice.html">ê³µì§€ì‚¬í•­</a>
            </div>
        
            <div class="mega-col">
                <a href="contact.html">ë¬¸ì˜í•˜ê¸°</a>
            </div>
        </div>
    </div>
</header>

<section class="sub-visual">
    <div class="visual-text">
        <h2>PRODUCT</h2>
        <p>JC Medicalì´ ì œì•ˆí•˜ëŠ” ìµœì²¨ë‹¨ ì˜ë£Œ ì†”ë£¨ì…˜ì„ í™•ì¸í•˜ì„¸ìš”.</p>
    </div>
</section>

<div class="content-wrapper">
	<div class="write-container">
		<div class="write-header">
			<h3>ì œí’ˆ ë“±ë¡í•˜ê¸°</h3>
		</div>
	
		<form id="productForm" class="write-form">
			<div class="form-grid">
				<div class="input-group">
					<label for="category">ì¹´í…Œê³ ë¦¬</label>
					<select id="category" required>
						<option value="used">ì¤‘ê³ ì¥ë¹„</option>
					</select>
				</div>
				<div class="input-group">
					<label for="title">ì œí’ˆëª…</label>
					<input type="text" id="title" placeholder="ì œí’ˆ ëª¨ë¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
				</div>
				<div class="input-group full-width">
					<label for="url">ìƒì„¸ ì—°ê²° URL (ì™¸ë¶€ ë§í¬)</label>
					<input id="url" placeholder="https://example.com">
				</div>
			</div>
	
			<div class="input-group">
				<label>ëŒ€í‘œ ì´ë¯¸ì§€</label>
				<div class="image-upload-box" id="dropZone">
					<input type="file" id="imageInput" accept="image/*" hidden>
					<div class="upload-placeholder" id="uploadPlaceholder">
						<span class="icon">ğŸ“¸</span>
						<p>í´ë¦­í•˜ê±°ë‚˜ ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”.</p>
						<p class="info">íŒŒì¼ì€ ìë™ìœ¼ë¡œ ìµœì í™”(ë¦¬ì‚¬ì´ì§•)ë©ë‹ˆë‹¤.</p>
					</div>
					<div id="imagePreview" class="preview-container hide">
						<img src="" alt="ë¯¸ë¦¬ë³´ê¸°" id="previewImg">
						<button type="button" class="remove-btn" id="removeImg">ì‚­ì œ</button>
					</div>
				</div>
			</div>
	
			<div class="input-group">
				<label>ì œí’ˆ ìƒì„¸ ì„¤ëª…</label>
				<div id="editor-container">
					<div id="editor" style="height: 300px;"></div>
				</div>
			</div>
	
			<div class="form-actions">
				<button type="button" class="btn-cancel" onclick="history.back()">ì·¨ì†Œ</button>
				<button type="submit" class="btn-submit" id="submitBtn">ì œí’ˆ ë“±ë¡í•˜ê¸°</button>
			</div>
		</form>
	</div>
</div>
    </section>

    <script>
	// 1. Quill ì—ë””í„° ì„¤ì •
const quill = new Quill('#editor', {
    theme: 'snow',
    modules: {
        toolbar: [
            ['bold', 'italic', 'underline'],
            [{ 'header': [1, 2, 3, false] }],
            ['link', 'image'],
            [{ 'color': [] }, { 'background': [] }],
            ['clean']
        ]
    }
});

let compressedImageBlob = null;

// 2. ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• í•¨ìˆ˜
async function resizeImage(file) {
    return new Promise((resolve) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = (ev) => {
            const img = new Image();
            img.src = ev.target.result;
            img.onload = () => {
                const canvas = document.createElement('canvas');
                let width = img.width;
                let height = img.height;
                const maxWidth = 1200; // ìµœëŒ€ ê°€ë¡œí­ ì„¤ì •

                if (width > maxWidth) {
                    height = (maxWidth / width) * height;
                    width = maxWidth;
                }

                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, width, height);

                // jpegë¡œ ì••ì¶• (í™”ì§ˆ 0.75)
                canvas.toBlob((blob) => {
                    resolve(blob);
                }, 'image/jpeg', 0.75);
            };
        };
    });
}

// 3. UI í•¸ë“¤ë§ (ì´ë¯¸ì§€ ì„ íƒ ë° ë¯¸ë¦¬ë³´ê¸°)
const dropZone = document.getElementById('dropZone');
const imageInput = document.getElementById('imageInput');
const previewImg = document.getElementById('previewImg');
const uploadPlaceholder = document.getElementById('uploadPlaceholder');
const imagePreview = document.getElementById('imagePreview');

dropZone.onclick = () => imageInput.click();

imageInput.onchange = async (e) => {
    const file = e.target.files[0];
    if (file) {
        compressedImageBlob = await resizeImage(file);
        const previewUrl = URL.createObjectURL(compressedImageBlob);
        previewImg.src = previewUrl;
        uploadPlaceholder.classList.add('hide');
        imagePreview.classList.remove('hide');
    }
};

document.getElementById('removeImg').onclick = (e) => {
    e.stopPropagation();
    compressedImageBlob = null;
    imageInput.value = "";
    uploadPlaceholder.classList.remove('hide');
    imagePreview.classList.add('hide');
};

// 4. ë°ì´í„° ì œì¶œ (Supabase)
document.getElementById('productForm').onsubmit = async (e) => {
    e.preventDefault();
    const submitBtn = document.getElementById('submitBtn');
    submitBtn.innerText = "ì—…ë¡œë“œ ì¤‘...";
    submitBtn.disabled = true;

    try {
        let imageUrl = "";

        // ì´ë¯¸ì§€ ì—…ë¡œë“œ
        if (compressedImageBlob) {
            const fileName = `prod_${Date.now()}.jpg`;
            const { data: uploadData, error: uploadError } = await supabaseClient
                .storage
                .from('products_img')
                .upload(fileName, compressedImageBlob);

            if (uploadError) throw uploadError;

            const { data: publicUrlData } = supabaseClient
                .storage
                .from('products_img')
                .getPublicUrl(fileName);
            
            imageUrl = publicUrlData.publicUrl;
        }

        // DB Insert
        const { error: insertError } = await supabaseClient
            .from('products')
            .insert([{
                category: document.getElementById('category').value,
                title: document.getElementById('title').value,
                url: document.getElementById('url').value,
                image_url: imageUrl,
                content: quill.root.innerHTML
            }]);

        if (insertError) throw insertError;

        alert('ì œí’ˆì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
        location.href = 'products.html';

    } catch (err) {
        console.error(err);
        alert('ë“±ë¡ ì‹¤íŒ¨: ' + err.message);
    } finally {
        submitBtn.innerText = "ì œí’ˆ ë“±ë¡í•˜ê¸°";
        submitBtn.disabled = false;
    }
};
    </script>	    
</div>
<footer class="site-footer">
  <div class="footer-inner">

    <div class="footer-logo-area">
      <img src="img/logo.png" alt="JC Medical" class="footer-logo">
    </div>
	
	<div class="footer-text-area">
      <p class="footer-info">
        Address: ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ìˆ˜ì •êµ¬ ìœ„ë¡€ì„œë¡œ24, ìœ„ë¡€í–‰ë³µë¹Œë”©3ì¸µ 303í˜¸<br>
        Tel: 070-4651-5088 | 010-9474-6127 <br>
        E-mail: jcmedi0826@naver.com<Br>
		ì‚¬ì—…ìë²ˆí˜¸: 512-13-30045
      </p>
	  
	  <div class="footer-links">
      <a href="policy.html?tab=terms">ì´ìš©ì•½ê´€</a>
      <span class="divider">|</span>
      <a href="policy.html?tab=privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    </div>
    </div>

  </div>

  <div class="footer-bottom">
    Â© 2025 JC Medical. All rights reserved.
  </div>
</footer>
</body>
</html>